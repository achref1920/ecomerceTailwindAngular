<app-navbar></app-navbar>

<div class="min-h-screen bg-gradient-to-br from-indigo-200 via-purple-200 to-pink-200 py-12 px-6">
  <h2 class="text-center text-4xl font-extrabold text-indigo-800 mb-10 tracking-tight">Explore Our Products</h2>

  <!-- Category Filter -->
  <div class="max-w-lg mx-auto mb-10 relative">
    <label for="categoryFilter" class="block text-base font-semibold text-indigo-900 mb-3">Filter by Category</label>
    <div class="relative">
      <select
        id="categoryFilter"
        class="w-full px-5 py-3 border-2 border-indigo-300 rounded-xl bg-white text-indigo-900 focus:ring-4 focus:ring-indigo-400 focus:border-indigo-500 transition-all duration-300 appearance-none shadow-sm hover:shadow-md"
        (change)="onCategoryChange($event)"
      >
        <option value="" disabled selected>Select a category</option>
        <option value="">All Categories</option>
        <option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
      <span class="absolute right-4 top-1/2 -translate-y-1/2 text-indigo-500">
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </span>
    </div>
  </div>

  <!-- Product Grid -->
  <div class="max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
    <div
      *ngFor="let product of products"
      class="bg-white rounded-2xl shadow-xl overflow-hidden transform transition-all hover:-translate-y-2 hover:shadow-2xl duration-500 hover:rotate-1"
    >
      <a [routerLink]="['/product', product.id]" class="block">
        <div class="relative w-full h-72 overflow-hidden">
          <img
            [src]="product.imageUrl"
            class="w-full h-full object-cover transform hover:scale-125 transition-transform duration-500 ease-out"
            alt="{{ product.name }}"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 hover:opacity-100 flex justify-center items-center transition-opacity duration-300">
            <i class="fas fa-search-plus text-white text-3xl drop-shadow-md"></i>
          </div>
        </div>
        <div class="p-5 text-center">
          <h5 class="text-xl font-bold text-indigo-900 mb-2 tracking-tight">{{ product.name }}</h5>
          <p class="text-sm text-gray-500 mb-3 line-clamp-2">{{ product.description }}</p>
          <h6 class="text-2xl font-extrabold text-red-600">
            {{ product.price }} TND
          </h6>
        </div>
      </a>
      <button
        class="w-full bg-gradient-to-r from-teal-500 to-purple-600 text-indigo-900 py-3 font-bold text-base rounded-b-xl hover:from-teal-500 hover:to-teal-600 hover:shadow-[0_0_15px_rgba(255,193,7,0.6)] transition-all duration-300 flex items-center justify-center gap-2"
        (click)="addToCart(product.id, 1)"
      >
        <i class="bi bi-cart-plus text-lg"></i> Add to Cart
      </button>
    </div>
  </div>
</div>

<app-footer></app-footer>